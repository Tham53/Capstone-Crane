{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\Admin\\\\Documents\\\\Crane\\\\Capstone-Crane\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\Admin\\\\Documents\\\\Crane\\\\Capstone-Crane\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"C:\\\\Users\\\\Admin\\\\Documents\\\\Crane\\\\Capstone-Crane\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";\nimport _get from \"C:\\\\Users\\\\Admin\\\\Documents\\\\Crane\\\\Capstone-Crane\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/get\";\nimport _getPrototypeOf from \"C:\\\\Users\\\\Admin\\\\Documents\\\\Crane\\\\Capstone-Crane\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"C:\\\\Users\\\\Admin\\\\Documents\\\\Crane\\\\Capstone-Crane\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport GameObject from './GameObject';\nvar RESPAWN_MAX_DISTANCE = 800;\n\nvar EnemySpawner = /*#__PURE__*/function (_GameObject) {\n  _inherits(EnemySpawner, _GameObject);\n\n  function EnemySpawner(props) {\n    var _this;\n\n    _classCallCheck(this, EnemySpawner);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(EnemySpawner).call(this, props));\n    _this.triggered = false;\n    _this.enemiesKilled = 0;\n\n    _this.addEnemies = function () {\n      _this.enemies.forEach(function (enemy) {\n        setTimeout(function () {\n          return _this.addEnemy(enemy);\n        }, enemy.delay);\n      });\n\n      if (_this.respawnEvery && _this.playersStillCloseEnoughToRespawn()) {\n        setTimeout(_this.addEnemies, _this.respawnEvery);\n      }\n    };\n\n    _this.addEnemy = function (enemy) {\n      _this.gameState.addGameObject(enemy.enemyType, {\n        position: {\n          x: enemy.position.x + _this.position.x,\n          y: enemy.position.y + _this.position.y,\n          z: enemy.position.z + _this.position.z\n        },\n        onDie: _this.onEnemyKilled\n      });\n    };\n\n    _this.onEnemyKilled = function () {\n      _this.enemiesKilled += 1;\n\n      if (_this.enemiesKilled === _this.enemies.length && _this.locksCamera) {\n        _this.camera.unlock();\n      }\n    };\n\n    _this.triggerX = props.triggerX;\n    _this.enemies = props.enemies;\n    _this.locksCamera = props.locksCamera;\n    _this.respawnEvery = props.respawnEvery;\n    return _this;\n  }\n\n  _createClass(EnemySpawner, [{\n    key: \"stepMovement\",\n    value: function stepMovement(deltaTime) {\n      if (this.camera.position.x >= this.triggerX) {\n        if (!this.triggered) {\n          this.trigger();\n        }\n      }\n\n      _get(_getPrototypeOf(EnemySpawner.prototype), \"stepMovement\", this).call(this, deltaTime);\n    }\n  }, {\n    key: \"trigger\",\n    value: function trigger() {\n      this.triggered = true;\n      this.addEnemies();\n\n      if (this.locksCamera) {\n        this.camera.lock();\n      }\n    }\n  }, {\n    key: \"playersStillCloseEnoughToRespawn\",\n    value: function playersStillCloseEnoughToRespawn() {\n      var _this2 = this;\n\n      return this.gameState.players.every(function (player) {\n        return player.position.x <= _this2.triggerX + RESPAWN_MAX_DISTANCE;\n      });\n    }\n  }]);\n\n  return EnemySpawner;\n}(GameObject);\n\nexport default EnemySpawner;","map":{"version":3,"sources":["C:/Users/Admin/Documents/Crane/Capstone-Crane/src/state/EnemySpawner.js"],"names":["GameObject","RESPAWN_MAX_DISTANCE","EnemySpawner","props","triggered","enemiesKilled","addEnemies","enemies","forEach","enemy","setTimeout","addEnemy","delay","respawnEvery","playersStillCloseEnoughToRespawn","gameState","addGameObject","enemyType","position","x","y","z","onDie","onEnemyKilled","length","locksCamera","camera","unlock","triggerX","deltaTime","trigger","lock","players","every","player"],"mappings":";;;;;;AAAA,OAAOA,UAAP,MAAuB,cAAvB;AAEA,IAAMC,oBAAoB,GAAG,GAA7B;;IAEMC,Y;;;AAKJ,wBAAaC,KAAb,EAAqB;AAAA;;AAAA;;AACnB,sFAAOA,KAAP;AADmB,UAHrBC,SAGqB,GAHT,KAGS;AAAA,UAFrBC,aAEqB,GAFL,CAEK;;AAAA,UAgCrBC,UAhCqB,GAgCR,YAAM;AACjB,YAAKC,OAAL,CAAaC,OAAb,CAAsB,UAAAC,KAAK,EAAI;AAC7BC,QAAAA,UAAU,CAAC;AAAA,iBAAM,MAAKC,QAAL,CAAeF,KAAf,CAAN;AAAA,SAAD,EAA+BA,KAAK,CAACG,KAArC,CAAV;AACD,OAFD;;AAIA,UAAK,MAAKC,YAAL,IAAqB,MAAKC,gCAAL,EAA1B,EAAoE;AAClEJ,QAAAA,UAAU,CAAE,MAAKJ,UAAP,EAAmB,MAAKO,YAAxB,CAAV;AACD;AACF,KAxCoB;;AAAA,UA0CrBF,QA1CqB,GA0CV,UAAEF,KAAF,EAAa;AACtB,YAAKM,SAAL,CAAeC,aAAf,CAA8BP,KAAK,CAACQ,SAApC,EAA+C;AAC7CC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,CAAC,EAAEV,KAAK,CAACS,QAAN,CAAeC,CAAf,GAAmB,MAAKD,QAAL,CAAcC,CAD5B;AAERC,UAAAA,CAAC,EAAEX,KAAK,CAACS,QAAN,CAAeE,CAAf,GAAmB,MAAKF,QAAL,CAAcE,CAF5B;AAGRC,UAAAA,CAAC,EAAEZ,KAAK,CAACS,QAAN,CAAeG,CAAf,GAAmB,MAAKH,QAAL,CAAcG;AAH5B,SADmC;AAM7CC,QAAAA,KAAK,EAAE,MAAKC;AANiC,OAA/C;AAQD,KAnDoB;;AAAA,UAqDrBA,aArDqB,GAqDL,YAAM;AACpB,YAAKlB,aAAL,IAAsB,CAAtB;;AACA,UAAK,MAAKA,aAAL,KAAuB,MAAKE,OAAL,CAAaiB,MAApC,IAA8C,MAAKC,WAAxD,EAAsE;AACpE,cAAKC,MAAL,CAAYC,MAAZ;AACD;AACF,KA1DoB;;AAEnB,UAAKC,QAAL,GAAgBzB,KAAK,CAACyB,QAAtB;AACA,UAAKrB,OAAL,GAAeJ,KAAK,CAACI,OAArB;AACA,UAAKkB,WAAL,GAAmBtB,KAAK,CAACsB,WAAzB;AACA,UAAKZ,YAAL,GAAoBV,KAAK,CAACU,YAA1B;AALmB;AAMpB;;;;iCAEagB,S,EAAY;AAExB,UAAK,KAAKH,MAAL,CAAYR,QAAZ,CAAqBC,CAArB,IAA0B,KAAKS,QAApC,EAA+C;AAC7C,YAAK,CAAC,KAAKxB,SAAX,EAAuB;AACrB,eAAK0B,OAAL;AACD;AACF;;AAED,qFAAoBD,SAApB;AACD;;;8BAES;AACR,WAAKzB,SAAL,GAAiB,IAAjB;AAEA,WAAKE,UAAL;;AACA,UAAK,KAAKmB,WAAV,EAAwB;AACtB,aAAKC,MAAL,CAAYK,IAAZ;AACD;AACF;;;uDAEkC;AAAA;;AACjC,aAAO,KAAKhB,SAAL,CAAeiB,OAAf,CAAuBC,KAAvB,CAA8B,UAAAC,MAAM;AAAA,eAAIA,MAAM,CAAChB,QAAP,CAAgBC,CAAhB,IAAqB,MAAI,CAACS,QAAL,GAAgB3B,oBAAzC;AAAA,OAApC,CAAP;AACD;;;;EAnCwBD,U;;AAkE3B,eAAeE,YAAf","sourcesContent":["import GameObject from './GameObject'\r\n\r\nconst RESPAWN_MAX_DISTANCE = 800\r\n\r\nclass EnemySpawner extends GameObject {\r\n\r\n  triggered = false\r\n  enemiesKilled = 0\r\n\r\n  constructor( props ) {\r\n    super( props )\r\n    this.triggerX = props.triggerX\r\n    this.enemies = props.enemies\r\n    this.locksCamera = props.locksCamera\r\n    this.respawnEvery = props.respawnEvery\r\n  }\r\n\r\n  stepMovement( deltaTime ) {\r\n    \r\n    if ( this.camera.position.x >= this.triggerX ) {\r\n      if ( !this.triggered ) {\r\n        this.trigger()\r\n      }\r\n    }\r\n \r\n    super.stepMovement( deltaTime )\r\n  }\r\n\r\n  trigger() {\r\n    this.triggered = true\r\n\r\n    this.addEnemies()\r\n    if ( this.locksCamera ) {\r\n      this.camera.lock()\r\n    }\r\n  }\r\n\r\n  playersStillCloseEnoughToRespawn() {\r\n    return this.gameState.players.every( player => player.position.x <= this.triggerX + RESPAWN_MAX_DISTANCE )\r\n  }\r\n\r\n  addEnemies = () => {\r\n    this.enemies.forEach( enemy => {\r\n      setTimeout(() => this.addEnemy( enemy ), enemy.delay )\r\n    })\r\n\r\n    if ( this.respawnEvery && this.playersStillCloseEnoughToRespawn() ) {\r\n      setTimeout( this.addEnemies, this.respawnEvery )\r\n    }\r\n  }\r\n\r\n  addEnemy = ( enemy ) => {\r\n    this.gameState.addGameObject( enemy.enemyType, {\r\n      position: {\r\n        x: enemy.position.x + this.position.x, \r\n        y: enemy.position.y + this.position.y,\r\n        z: enemy.position.z + this.position.z\r\n      },\r\n      onDie: this.onEnemyKilled\r\n    })  \r\n  }\r\n\r\n  onEnemyKilled = () => {\r\n    this.enemiesKilled += 1\r\n    if ( this.enemiesKilled === this.enemies.length && this.locksCamera ) {\r\n      this.camera.unlock()\r\n    }\r\n  }\r\n}\r\n\r\nexport default EnemySpawner"]},"metadata":{},"sourceType":"module"}